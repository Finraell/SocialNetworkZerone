webpackJsonp([10],{fOvi:function(t,i){},tJ7h:function(t,i,e){"use strict";var s=e("Dd8w"),o=e.n(s),n=e("NYxO"),a=e("/o5o"),l=e("PJh5"),r=e.n(l),f={name:"ProfileInfo",components:{Modal:a.a},props:{me:Boolean,online:Boolean,blocked:Boolean,friend:Boolean,info:Object},data:function(){return{modalShow:!1,modalText:"",modalType:"deleteFriend"}},computed:o()({},Object(n.c)("profile/dialogs",["dialogs","getStatus"]),{statusText:function(){return this.online?"онлайн":"был в сети "+(this.getStatus?r()(this.getStatus.last_activity).fromNow():"")},blockedText:function(){return this.blocked?"Пользователь заблокирован":"Заблокировать"},btnVariantInfo:function(){return this.blocked?{variant:"red",text:"Разблокировать"}:this.friend?{variant:"red",text:"Удалить из друзей"}:{variant:"white",text:"Добавить в друзья"}}}),methods:o()({},Object(n.b)("users/actions",["apiBlockUser","apiUnblockUser"]),Object(n.b)("profile/friends",["apiAddFriends","apiDeleteFriends"]),Object(n.b)("profile/dialogs",["createDialogWithUser","apiLoadAllDialogs","apiSetStatus"]),Object(n.b)("users/info",["apiInfo"]),Object(n.d)("profile/dialogs",["setStatus"]),{blockedUser:function(){this.blocked||(this.modalText="Вы уверены, что хотите заблокировать пользователя "+this.info.fullName,this.modalShow=!0,this.modalType="block")},profileAction:function(){var t=this;if(!this.blocked)return this.friend?(this.modalText="Вы уверены, что хотите удалить пользователя "+this.info.fullName+" из друзей?",this.modalShow=!0,void(this.modalType="deleteFriend")):void this.apiAddFriends(this.info.id).then(function(){t.apiInfo(t.$route.params.id)});this.apiUnblockUser(this.$route.params.id).then(function(){t.apiInfo(t.$route.params.id)})},closeModal:function(){this.modalShow=!1},onConfirm:function(){var t=this;"block"!==this.modalType?this.apiDeleteFriends(this.$route.params.id).then(function(){t.apiInfo(t.$route.params.id),t.closeModal()}):this.apiBlockUser(this.$route.params.id).then(function(){t.apiInfo(t.$route.params.id),t.closeModal()})},onSentMessage:function(){if(this.blocked)return!1;this.$router.push({name:"Im",query:{userId:this.info.id}})}}),beforeCreate:function(){var t=this;this.intervalForSetStatus=setInterval(function(){t.apiSetStatus({userId:t.$route.params.id})},5e3)},beforeDestroy:function(){window.clearInterval(this.intervalForSetStatus),this.setStatus(null)}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.info?e("div",{staticClass:"profile-info"},[e("div",{staticClass:"profile-info__pic"},[e("div",{staticClass:"profile-info__img",class:{offline:!t.online&&!t.me}},[e("img",{attrs:{src:t.info.photo,alt:t.info.fullName}})]),t.me?t._e():e("div",{staticClass:"profile-info__actions"},[e("button-hover",{attrs:{disable:t.blocked},nativeOn:{click:function(i){return t.onSentMessage.apply(null,arguments)}}},[t._v("Написать сообщение")]),e("button-hover",{staticClass:"profile-info__add",attrs:{variant:t.btnVariantInfo.variant,bordered:"bordered"},nativeOn:{click:function(i){return t.profileAction.apply(null,arguments)}}},[t._v(t._s(t.btnVariantInfo.text))])],1)]),e("div",{staticClass:"profile-info__main"},[t.me?e("router-link",{staticClass:"edit",attrs:{to:{name:"Settings"}}},[e("simple-svg",{attrs:{filepath:t.info.photo}})],1):e("span",{staticClass:"profile-info__blocked",class:{blocked:t.blocked},on:{click:t.blockedUser}},[t._v(t._s(t.blockedText))]),e("div",{staticClass:"profile-info__header"},[e("h1",{staticClass:"profile-info__name"},[t._v(t._s(t.info.fullName))]),e("span",{staticClass:"user-status",class:{online:t.online,offline:!t.online}},[t._v(t._s(t.statusText))])]),e("div",{staticClass:"profile-info__block"},[e("span",{staticClass:"profile-info__title"},[t._v("Дата рождения:")]),t.info.birth_date?e("span",{staticClass:"profile-info__val"},[t._v(t._s(t._f("moment")(t.info.birth_date,"D MMMM YYYY"))+" ("+t._s(t.info.ages)+" года)")]):e("span",{staticClass:"profile-info__val"},[t._v("не заполнено")])]),e("div",{staticClass:"profile-info__block"},[e("span",{staticClass:"profile-info__title"},[t._v("Телефон:")]),t.info.phone?e("a",{staticClass:"profile-info__val",attrs:{href:"tel:"+t.info.phone}},[t._v(t._s(t._f("phone")(t.info.phone)))]):e("a",{staticClass:"profile-info__val"},[t._v("не заполнено")])]),e("div",{staticClass:"profile-info__block"},[e("span",{staticClass:"profile-info__title"},[t._v("Страна, город:")]),t.info.country?e("span",{staticClass:"profile-info__val"},[t._v(t._s(t.info.country.Country)+", "+t._s(t.info.city.City))]):e("span",{staticClass:"profile-info__val"},[t._v("не заполнено")])]),e("div",{staticClass:"profile-info__block"},[e("span",{staticClass:"profile-info__title"},[t._v("О себе:")]),t.info.about?e("span",{staticClass:"profile-info__val"},[t._v(t._s(t.info.about))]):e("span",{staticClass:"profile-info__val"},[t._v("не заполнено")])])],1),e("modal",{model:{value:t.modalShow,callback:function(i){t.modalShow=i},expression:"modalShow"}},[t.modalText?e("p",[t._v(t._s(t.modalText))]):t._e(),e("template",{slot:"actions"},[e("button-hover",{nativeOn:{click:function(i){return i.preventDefault(),t.onConfirm.apply(null,arguments)}}},[t._v("Да")]),e("button-hover",{attrs:{variant:"red",bordered:"bordered"},nativeOn:{click:function(i){return t.closeModal.apply(null,arguments)}}},[t._v("Отмена")])],1)],2)],1):t._e()},staticRenderFns:[]};var d=e("VU/8")(f,c,!1,function(t){e("fOvi")},null,null);i.a=d.exports},xX9V:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Dd8w"),o=e.n(s),n=e("UBpT"),a=e("tJ7h"),l=e("0Hd5"),r=e("NYxO"),f={name:"ProfileId",components:{FriendsPossible:n.a,ProfileInfo:a.a,NewsBlock:l.a},data:function(){return{loading:!1}},methods:o()({},Object(r.b)("users/info",["userInfoId"]),Object(r.b)("profile/friends",["apiFriends"])),computed:o()({},Object(r.c)("profile/friends",["getResultById"]),Object(r.c)("users/info",["getUsersInfo","getWall"]),{isBlocked:function(){var t=this,i=!1;return this.getResultById("blocked").map(function(e){e.id==t.$route.params.id&&(i=!0)}),i},isFriend:function(){var t=this,i=!1;return this.getResultById("friends").map(function(e){e.id==t.$route.params.id&&(i=!0)}),i}}),beforeRouteEnter:function(t,i,e){e(function(t){t.apiFriends()})},created:function(){this.userInfoId(this.$route.params.id)}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.getUsersInfo?e("div",{staticClass:"profile inner-page"},[e("div",{staticClass:"inner-page__main"},[e("div",{staticClass:"profile__info"},[e("profile-info",{attrs:{info:t.getUsersInfo,blocked:t.isBlocked,friend:t.isFriend,online:t.getUsersInfo.is_onlined}})],1),e("div",{staticClass:"profile__news"},[e("div",{staticClass:"profile__tabs"},[e("span",{staticClass:"profile__tab active"},[t._v("Публикации "+t._s(t.getUsersInfo.first_name)+" ("+t._s(t.getWall.length)+")")])]),e("div",{staticClass:"profile__news-list"},t._l(t.getWall,function(t){return e("news-block",{key:t.id,attrs:{info:t}})}),1)])]),e("div",{staticClass:"inner-page__aside"},[e("friends-possible")],1)]):t._e()},staticRenderFns:[]},d=e("VU/8")(f,c,!1,null,null,null);i.default=d.exports}});
//# sourceMappingURL=10.6307dede4516b32b7fb1.js.map