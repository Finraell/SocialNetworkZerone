CREATE TABLE dialogs
(
    id    INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    title VARCHAR(255),
    CONSTRAINT pk_dialogs PRIMARY KEY (id)
);

CREATE TABLE person2dialog
(
    id        INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    person_id BIGINT,
    dialog_id BIGINT,
    CONSTRAINT pk_person2dialog PRIMARY KEY (id)
);

ALTER TABLE person2dialog
    ADD CONSTRAINT FK_PERSON_ON_DIALOG FOREIGN KEY (dialog_id) REFERENCES dialogs (id);

ALTER TABLE person2dialog
    ADD CONSTRAINT FK_DIALOG_ON_PERSON FOREIGN KEY (person_id) REFERENCES persons (id);